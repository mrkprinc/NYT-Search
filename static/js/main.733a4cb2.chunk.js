(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a(52)},47:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(21),r=a.n(c),i=a(6),u=a(7),s=a(9),o=a(8),m=a(10),d=a(55),p=a(54),h=a(57),E=a(56),S=a(11),v=a.n(S),b=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(o.a)(t).call(this))).clickSearch=function(t){t.preventDefault(),e.setState({resultSet:[],displayResults:!0});var a="https://intense-island-98620.herokuapp.com/api/"+document.getElementById("txtTopic").value.trim(),n=document.getElementById("txtStartDate").value.trim(),l=document.getElementById("txtEndDate").value.trim();n&&l&&(a+="/".concat(n,"/").concat(l)),v.a.get(a).then(function(t){var a=t.data.filter(function(e){return e.pub_date}).map(function(e){return{_id:e._id,title:e.headline.main,snippet:e.snippet,date:e.pub_date,url:e.web_url,active:1}});e.setState({resultSet:a})})},e.clickSave=function(t){var a=t.target;console.log("click"),console.log(e.state.resultSet[parseInt(a.getAttribute("data-index"))]),v()({method:"POST",url:"https://intense-island-98620.herokuapp.com/api/saved",data:e.state.resultSet[parseInt(a.getAttribute("data-index"))]}).then(function(e){console.log(e),a.classList.add("saved")}).catch(function(e){return console.log(e)})},e.state={displayResults:!1,resultSet:[]},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.state.displayResults?l.a.createElement("main",null,l.a.createElement(f,{clickSearch:this.clickSearch,key:0}),l.a.createElement(k,{resultSet:this.state.resultSet,resultSource:"webAPI",buttonClick:this.clickSave,key:1})):l.a.createElement("main",null,l.a.createElement(f,{clickSearch:this.clickSearch,key:0}))}}]),t}(l.a.Component),f=function(e){return l.a.createElement("section",{id:"searchBox"},l.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"txtTopic"},"Topic: "),l.a.createElement("input",{id:"txtTopic",type:"text"})),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"txtStartDate"},"Start Date: "),l.a.createElement("input",{id:"txtStartDate",type:"text",placeholder:"YYYYMMDD"})),l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"txtEndDate"},"End Date: "),l.a.createElement("input",{id:"txtEndDate",type:"text",placeholder:"YYYYMMDD"})),l.a.createElement("div",null,l.a.createElement("span",{id:"btnSearch",className:"button",onClick:e.clickSearch},"Search"))))},k=function(e){var t;return t=e.resultSet.length?e.resultSet.map(function(t,a){return l.a.createElement(g,{article:t,resultSource:e.resultSource,buttonClick:e.buttonClick,key:t._id,index:a})}):l.a.createElement("div",null,l.a.createElement("span",{className:"spin"},"\u2730"),l.a.createElement("span",null,"Retrieving articles...")),l.a.createElement("section",{className:"resultsPanel"},t)},g=function(e){var t="webAPI"===e.resultSource?"Save":"Delete";return l.a.createElement("div",{className:"searchResult"},l.a.createElement("div",{className:"noShrink"},l.a.createElement("span",{className:"dateSpan"},e.article.date)),l.a.createElement("div",{className:"grow"},l.a.createElement("strong",null,e.article.title),l.a.createElement("br",null),e.article.snippet),l.a.createElement("div",{className:"noShrink"},l.a.createElement("a",{href:e.article.url,target:"blank"},"Go to Article"),l.a.createElement("div",{className:"button",onClick:e.buttonClick,"data-index":e.index},t)))},x=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(o.a)(t).call(this))).state={dataSet:[]},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.a.get("https://intense-island-98620.herokuapp.com/api/saved").then(function(t){console.log(t),e.setState({dataSet:t.data})})}},{key:"render",value:function(){return l.a.createElement(k,{resultSet:this.state.dataSet,resultSource:"db"})}}]),t}(l.a.Component),y=(a(47),function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return l.a.createElement(d.a,null,l.a.createElement("div",null,l.a.createElement("header",null,l.a.createElement("h1",null,"New York Times Search"),l.a.createElement("h3",null,"find, save & annotate articles"),l.a.createElement("nav",null,l.a.createElement(p.a,{to:"/"},"Article Search"),l.a.createElement(p.a,{to:"/saved"},"Saved Articles"))),l.a.createElement(h.a,null,l.a.createElement(E.a,{path:"/saved",component:x}),l.a.createElement(E.a,{path:"/",component:b}))))}}]),t}(l.a.Component));r.a.render(l.a.createElement(y,null),document.getElementById("root"))}},[[23,2,1]]]);
//# sourceMappingURL=main.733a4cb2.chunk.js.map