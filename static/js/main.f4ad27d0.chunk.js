(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){e.exports=a(28)},23:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),l=a.n(c),i=a(5),s=a(6),u=a(8),o=a(7),m=a(9),d=a(31),p=a(30),h=a(33),E=a(32),b=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(o.a)(t).call(this))).clickSearch=function(t){t.preventDefault(),e.setState({resultSet:[],displayResults:!0});var a="https://intense-island-98620.herokuapp.com/api/"+document.getElementById("txtTopic").value.trim(),n=document.getElementById("txtStartDate").value.trim(),r=document.getElementById("txtEndDate").value.trim();n&&r&&(a+="/".concat(n,"/").concat(r)),fetch(a).then(function(e){return e.json()}).then(function(t){var a=t.filter(function(e){return e.pub_date}).map(function(e){return{_id:e._id,title:e.headline.main,snippet:e.snippet,date:e.pub_date,url:e.web_url,active:1}});e.setState({resultSet:a})})},e.clickSave=function(t){var a=t.target;fetch("https://intense-island-98620.herokuapp.com/api/saved",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(e.state.resultSet[parseInt(a.getAttribute("data-index"))])})},e.state={displayResults:!1,resultSet:[]},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.state.displayResults?r.a.createElement("main",null,r.a.createElement(v,{clickSearch:this.clickSearch,key:0}),r.a.createElement(S,{resultSet:this.state.resultSet,resultSource:"webAPI",buttonClick:this.clickSave,key:1})):r.a.createElement("main",null,r.a.createElement(v,{clickSearch:this.clickSearch,key:0}))}}]),t}(r.a.Component),v=function(e){return r.a.createElement("section",{id:"searchBox"},r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"txtTopic"},"Topic: "),r.a.createElement("input",{id:"txtTopic",type:"text"})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"txtStartDate"},"Start Date: "),r.a.createElement("input",{id:"txtStartDate",type:"text",placeholder:"YYYYMMDD"})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"txtEndDate"},"End Date: "),r.a.createElement("input",{id:"txtEndDate",type:"text",placeholder:"YYYYMMDD"})),r.a.createElement("div",null,r.a.createElement("span",{id:"btnSearch",className:"button",onClick:e.clickSearch},"Search"))))},S=function(e){var t;return t=e.resultSet.length?e.resultSet.map(function(t,a){return r.a.createElement(j,{article:t,resultSource:e.resultSource,buttonClick:e.buttonClick,key:t._id,index:a})}):r.a.createElement("div",null,r.a.createElement("span",{className:"spin"},"\u2730"),r.a.createElement("span",null,"Retrieving articles...")),r.a.createElement("section",{className:"resultsPanel"},t)},f=a(14),k=a.n(f),j=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(o.a)(t).call(this))).state={status:"click"},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"searchResult"},r.a.createElement("div",{className:"noShrink"},r.a.createElement("span",{className:"dateSpan"},k()(this.props.article.date).format("MMM Do YYYY"))),r.a.createElement("div",{className:"grow"},r.a.createElement("strong",null,this.props.article.title),r.a.createElement("br",null),this.props.article.snippet),r.a.createElement("div",{className:"noShrink"},r.a.createElement("a",{className:"button",href:this.props.article.url,target:"blank"},"Go to Article"),r.a.createElement(O,{buttonClick:this.props.buttonClick,index:this.props.index,resultSource:this.props.resultSource,status:this.state.status})))}}]),t}(r.a.Component),y=a(16),O=function(e){var t="",a="webAPI"===e.resultSource?"save":"delete";switch(e.status){case"saved":var n=Object(y.a)("saved",2);t=n[0],a=n[1];break;case"deleted":t="deleted",a="Deleted"}return r.a.createElement("div",{className:"button ".concat(t),"data-index":e.index,onClick:e.buttonClick},a)},x=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(o.a)(t).call(this))).state={dataSet:[]},e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://intense-island-98620.herokuapp.com/api/saved").then(function(e){return e.json()}).then(function(t){e.setState({dataSet:t})})}},{key:"render",value:function(){return console.log(this.state.dataSet),r.a.createElement(S,{resultSet:this.state.dataSet,resultSource:"db"})}}]),t}(r.a.Component),D=(a(23),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("h1",null,"New York Times Search"),r.a.createElement("h3",null,"find, save & annotate articles"),r.a.createElement("nav",null,r.a.createElement(p.a,{to:"/"},"Article Search"),r.a.createElement(p.a,{to:"/saved"},"Saved Articles"))),r.a.createElement(h.a,null,r.a.createElement(E.a,{path:"/saved",component:x}),r.a.createElement(E.a,{path:"/",component:b}))))}}]),t}(r.a.Component));l.a.render(r.a.createElement(D,null),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.f4ad27d0.chunk.js.map